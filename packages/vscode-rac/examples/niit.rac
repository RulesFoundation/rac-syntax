# 26 USC § 1411(a) - Net Investment Income Tax

text: |
  (a) In general.— There is hereby imposed a tax equal to 3.8 percent
  of the lesser of— (1) net investment income, or (2) modified AGI
  in excess of the threshold amount.

parameter niit_rate:
  description: "Tax rate on net investment income"
  unit: rate
  values:
    2013-01-01: 0.038

variable net_investment_income_tax:
  imports:
    - 26/1411/c#net_investment_income
    - 26/1411/b#threshold_amount
  entity: TaxUnit
  period: Year
  dtype: Money
  formula: |
    excess_magi = max(0, modified_agi - threshold_amount)
    return niit_rate * min(net_investment_income, excess_magi)
  tests:
    - inputs: {modified_agi: 300000, threshold_amount: 250000,
               net_investment_income: 80000}
      expect: 1900  # 3.8% × min(80k, 50k)
